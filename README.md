# aborg (Aduiobook Orginizer)
**NOTE: This tool is still in development and is currently in an alpha stage.**

A tool for handling the organization of your audiobook collection.

This tool uses the Handlebars templating schema to rename and organize your audiobook collection by pulling the data from the `metadata.json` file that is generated by tools like AudiobookShelf and by pulling data from the audio file name.

---

## Usage
```
aborg [OPTIONS] --source <SOURCE> --destination <DESTINATION>

Options:
  -s, --source <SOURCE>            The directory containing the audiobook files you want to manage. This is the source directory for the operation
  -d, --destination <DESTINATION>  The directory` where the managed files will be moved. This is the destination directory for the operation
  -p, --path-schema <PATH_SCHEMA>  The schema used to format the newly created destination directories. This uses the Handlebar schema style [default: "{{author}}/{{#if series}}{{series}}/{{/if}}{{title}}{{#if book_number_with_zeros}} - Book {{book_number_with_zeros}}{{/if}}"]
  -f, --file-schema <FILE_SCHEMA>  The schema used to format the files that are being moved. This uses the Handlebar schema style [default: "{{#if series}}{{series}} - {{/if}}{{title}}{{#if file_number_with_zeros}} ({{file_number_with_zeros}}){{/if}}"]
      --dry-run                    If set to true, the process will only display the actions that would be performed without actually renaming, moving, or deleting any files
      --action <ACTION>            Specifies the action option: [default: 0]
                                            0 = Copy files only.
                                            1 = Moves the files, keep directory.
                                            2 = Moves the files and deletes the directory
      --metafile <METAFILE>        The name of the metadata file to look for in each directory. Defaults to 'metadata.json' [default: metadata.json]
      --file-types <FILE_TYPES>    A comma-separated list of audio file extensions to process. Defaults to common audiobook formats [default: m4b,m4a,m4p,mp3,aa,aax,aac,ogg,wma,wav,flac,alac]
  -h, --help                       Print help
  -V, --version                    Print version
```

---

### Default Schema's
These are the default schemas, but you can define your own by using the `--path-schema` and `--file-schema`

- Path: `{{author}}/{{#if series}}{{series}}/{{/if}}{{title}}{{#if book_number_with_zeros}} - Book {{book_number_with_zeros}}{{/if}}`
- File: `{{#if series}}{{series}} - {{/if}}{{title}}{{#if file_number_with_zeros}} ({{file_number_with_zeros}}){{/if}}`

Handlebar reference can be at [handlebarsjs.com](https://handlebarsjs.com/guide/)

---

### Metadata Available Fields
These are the common data fields available in the `metadata.json` files.

| **Fields** | **Description** |
| :--- | :--- |
| author | The book's author |
| series | If the book is part of a series, this will be the first entry in the `series` array. |
| title | The title of the book |
| subtitle | Extra title text, book tagline, etc. |
| book_number | Book number in the series |
| book_number_with_zeros | Book number with a leading zero |
| published_year | Year the book was published |
| published_date | Date the book was published |
| genre | The first genre in the genre array |
| language | The language the book is in |
| abridged | True if the book is abridged |

### Available Fields Pulled from File Name
These are fields that are pulled from the file title, if they exist.

| **Fields** | **Description** |
| :--- | :--- |
| file_number | Number of the audio file in the book (example: 9 in "Random Book Title - Section 9.mp3")
| file_number_with_zeros | The same as `file_number` but with up to two leading zeros (Example: 009 or 016) |
